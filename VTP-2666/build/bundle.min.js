!function e(t,i,n){function a(r,s){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){var i=t[r][1][e];return a(i||e)},c,c.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)a(n[r]);return a}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("./pieces.js"),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(n);i.default={pieces:a.default}},{"./pieces.js":2}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={frames:{blue:{frame:{x:152,y:1,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},blue_p:{frame:{x:156,y:164,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},donut:{frame:{x:609,y:164,w:181,h:149},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:181,h:149},sourceSize:{w:181,h:149}},green:{frame:{x:460,y:327,w:149,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:149,h:161},sourceSize:{w:149,h:161}},macaron:{frame:{x:610,y:1,w:148,h:155},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:148,h:155},sourceSize:{w:148,h:155}},marshmallow:{frame:{x:305,y:1,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},orange:{frame:{x:156,y:327,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},orange_p:{frame:{x:308,y:327,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},popcorn:{frame:{x:461,y:164,w:146,h:161},rotated:!1,trimmed:!0,spriteSourceSize:{x:2,y:0,w:146,h:161},sourceSize:{w:151,h:161}},pudding:{frame:{x:611,y:315,w:159,h:153},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:159,h:153},sourceSize:{w:159,h:153}},purple:{frame:{x:1,y:165,w:153,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:153,h:161},sourceSize:{w:153,h:161}},purple_p:{frame:{x:1,y:328,w:153,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:153,h:161},sourceSize:{w:153,h:161}},red:{frame:{x:309,y:164,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},red_p:{frame:{x:458,y:1,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},yellow:{frame:{x:1,y:1,w:149,h:162},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:149,h:162},sourceSize:{w:149,h:162}}},meta:{app:"http://www.codeandweb.com/texturepacker",version:"1.0",image:"tiles.png",format:"RGBA8888",size:{w:791,h:490},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:a52266418105fd394661db76f76d6094:5da80af01517e173c5b36dd3086b03ba:accbe1e7e294ded8391337fc1c446319$"}}},{}],3:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=e("./states/boot"),o=n(a),r=e("./states/endcard"),s=n(r),l=e("./states/preloader"),u=n(l),c=new Phaser.Game(document.body.clientWidth*window.devicePixelRatio,document.body.clientHeight*window.devicePixelRatio,Phaser.CANVAS,"game",null,!0);c.state.add("boot",new o.default),c.state.add("endcard",new s.default),c.state.add("preloader",new u.default),c.state.start("boot")},{"./states/boot":19,"./states/endcard":20,"./states/preloader":21}],4:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this.audios=[]}return a(e,[{key:"play",value:function(e,t,i){this.audios[e]=new Audio(t),this.initAudioArgs(e,i),this.audios[e].play()}},{key:"pause",value:function(e){this.audios[e].pause()}},{key:"mute",value:function(e){this.audios[e].muted=!0}},{key:"muteAll",value:function(){for(var e in this.audios)this.audios.hasOwnProperty(e)&&(this.audios[e].pause(),this.audios[e].muted=!0)}},{key:"unmuteAll",value:function(){for(var e in this.audios)this.audios.hasOwnProperty(e)&&(this.audios[e].muted=!1)}},{key:"initAudioArgs",value:function(e,t){this.audios[e].muted=!1,this.audios[e].autoplay=!0,void 0!==t&&void 0!==t.loop&&"boolean"==typeof t.loop&&t.loop&&this.audios[e].addEventListener("timeupdate",function(){this.currentTime>this.duration-.5&&(this.currentTime=0,this.play())},!1)}}]),e}();i.default=o},{}],5:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("../prefabs/collectible"),r=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){n(this,e),this.game=t,this.initSignals(),void 0!==PiecSettings.collectibles&&this.createCollectibles(),this.setupController()}return a(e,[{key:"initSignals",value:function(){this.onHudCreate=new Phaser.Signal,this.onHudChange=new Phaser.Signal}},{key:"setupController",value:function(){for(var e in PiecSettings.collectibles)void 0!==this.collectibles[e]&&this.collectibles[e].onHudChange.add(function(e,t){this.onHudChange.dispatch(e,t)},this)}},{key:"createCollectibles",value:function(){this.collectibles=[];for(var e in PiecSettings.collectibles){var t=new r.default(this.game,PiecSettings.collectibles[e]);t.onHudCreate.add(function(e,t){this.onHudCreate.dispatch(e,t)},this),this.collectibles[e]=t}}},{key:"getCollectible",value:function(e){return this.collectibles[e]}}]),e}();i.default=s},{"../prefabs/collectible":7}],6:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../utils/util"),u=n(l),c=e("../utils/container-util"),h=n(c),d=function(e){function t(e,i){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));switch(n.currentValue=i.initialValue,n.maxValue=i.maxValue,n.minValue=i.minValue,n.args=i,n.getContainerInfo(n.args.htmlTag),null!=n.args.backgroundSrc&&n.createCounterBackground(),n.visualStyle=i.style,i.style){case"number":n.createNumberCounter();break;case"rectangle_progressbar":n.createRectProgressBarCounter();break;case"circle_progressbar":n.createCircleProgressBarCounter();break;default:console.log("please set the counter style")}return n.game.add.existing(n),n}return r(t,e),s(t,[{key:"getContainerInfo",value:function(e){this.containerWidth=h.getContainerWidth(e),this.containerHeight=h.getContainerHeight(e),this.x=h.getContainerX(e),this.y=h.getContainerY(e)}},{key:"createRectProgressBarCounter",value:function(){this.barFilling=new Phaser.Sprite(this.game,0,0,this.args.backgroundSrc+"-fill"),this.add(this.barFilling),this.barFilling.anchor.set(0,.5),this.barFilling.x=this.counterBackground.x,this.barFilling.y=this.counterBackground.y+this.counterBackground.height/2,this.barFilling.scale.x=(this.counterBackground.width-this.barFilling.x)/this.barFilling.width,this.barFilling.scale.y=this.counterBackground.height/this.barFilling.height*.75,this.fullWidthFilling=this.barFilling.scale.x,null!=this.maxValue&&(this.barFilling.scale.x=this.currentValue/this.maxValue*this.fullWidthFilling),null!=this.args.iconSrc&&this.createCounterIcon("outside")}},{key:"createCircleProgressBarCounter",value:function(){this.barFilling=new Phaser.Sprite(this.game,0,0,this.args.backgroundSrc+"-fill"),this.add(this.barFilling),this.barFilling.anchor.set(.5),this.barFilling.x=this.counterBackground.x+this.counterBackground.width/2,this.barFilling.y=this.counterBackground.y+this.counterBackground.height/2,this.barFilling.scale.x=this.counterBackground.width/this.barFilling.width,this.barFilling.scale.y=this.counterBackground.height/this.barFilling.height,this.maskAngle={from:90,to:540},this.fullWidthFilling=this.maskAngle.to-this.maskAngle.from,this.arcMask=this.game.add.graphics(0,0);var e=this.maskAngle.from+this.currentValue/this.maxValue*this.fullWidthFilling;this.arcMask.beginFill(16777215),this.arcMask.arc(this.barFilling.x,this.barFilling.y,this.barFilling.width/2,this.game.math.degToRad(e),this.game.math.degToRad(this.maskAngle.from),!0),this.barFilling.mask=this.arcMask,this.add(this.arcMask)}},{key:"createNumberCounter",value:function(){this.fontSize=.5*this.counterBackground.height;var e={font:"bold "+this.fontSize+"px "};if(this.textField=new Phaser.Text(this.game,.7*this.counterBackground.width,this.counterBackground.height/2,this.currentValue,e),this.add(this.textField),this.textField.anchor.set(.5,.5),this.textField.align="center",this.textField.padding.set(this.fontSize/2,0),null!=PiecSettings.fontColor)this.textField.stroke="black",this.textField.strokeThickness=2,this.textField.fill=PiecSettings.fontColor,this.textField.setShadow(2,3,"rgb(0,0,0)",0);else{this.textField.stroke="#ff9d1b",this.textField.strokeThickness=5;var t=this.textField.context.createLinearGradient(0,0,0,this.textField.height);t.addColorStop(0,"#fffea5"),t.addColorStop(1,"#ffab02"),this.textField.fill=t}null!=this.args.iconSrc&&this.createCounterIcon("contain")}},{key:"createCounterIcon",value:function(e){this.counterIcon=new Phaser.Sprite(this.game,0,0,this.args.iconSrc),this.add(this.counterIcon),this.counterIcon.anchor.set(.5),"contain"==e?(this.counterIcon.scale.x=.7*this.counterBackground.height/this.counterIcon.height,this.counterIcon.x=this.counterBackground.x+this.counterIcon.width):"outside"==e&&(this.counterIcon.scale.x=.7*this.counterBackground.height/this.counterIcon.height,this.counterIcon.x=this.counterBackground.x-this.counterIcon.width),this.counterIcon.scale.y=this.counterIcon.scale.x,this.counterIcon.y=this.counterBackground.y+this.counterBackground.height/2}},{key:"createCounterBackground",value:function(){this.counterBackground=new Phaser.Sprite(this.game,0,0,this.args.backgroundSrc),this.add(this.counterBackground),this.counterBackground.scale.x=this.containerWidth/this.counterBackground.width,this.counterBackground.scale.y=this.counterBackground.scale.x}},{key:"changeCounterTo",value:function(e,t){var i=this.calcSpeedFromDuration(e,t);switch(this.visualStyle){case"number":this.changeNumTo(e,i);this.game.add.tween(this.textField.scale).to({x:1.4,y:1.4},1*t/5,Phaser.Easing.Linear.None,!0,1*t/3).onComplete.add(function(){this.game.add.tween(this.textField.scale).to({x:1,y:1},1*t/5,Phaser.Easing.Linear.None,!0,0)},this);break;case"rectangle_progressbar":this.changeRectBarTo(e,i);break;case"circle_progressbar":this.changeCircleBarTo(e,i)}}},{key:"calcSpeedFromDuration",value:function(e,t){return Math.ceil(2.5*Math.abs(e-this.currentValue)/(t/10))}},{key:"changeNumTo",value:function(e,t){if(e>this.currentValue){if(e>=this.maxValue)return this.currentValue=this.maxValue,void(null!=PiecSettings.winCounterCommaSeparation&&PiecSettings.winCounterCommaSeparation?this.textField.text=""+u.numberWithCommas(this.currentValue):this.textField.text=""+this.currentValue);this.currentValue<e&&(this.currentValue+=t,this.currentValue>e&&(this.currentValue=e),this.game.time.events.add(10,function(){null!=PiecSettings.winCounterCommaSeparation&&PiecSettings.winCounterCommaSeparation?this.textField.text=""+u.numberWithCommas(this.currentValue):this.textField.text=""+this.currentValue,this.currentValue<e&&this.changeNumTo(e,t)},this))}else{if(e<this.minValue)return this.currentValue=this.minValue,void(null!=PiecSettings.winCounterCommaSeparation&&PiecSettings.winCounterCommaSeparation?this.textField.text=""+u.numberWithCommas(this.currentValue):this.textField.text=""+this.currentValue);this.currentValue>e&&(this.currentValue-=t,this.currentValue<e&&(this.currentValue=e),this.game.time.events.add(10,function(){null!=PiecSettings.winCounterCommaSeparation&&PiecSettings.winCounterCommaSeparation?this.textField.text=""+u.numberWithCommas(this.currentValue):this.textField.text=""+this.currentValue,this.currentValue<e&&this.changeNumTo(e,t)},this))}}},{key:"changeRectBarTo",value:function(e,t){if(e>this.currentValue){if(e>this.maxValue)return this.currentValue=this.maxValue,void(this.barFilling.scale.x=this.fullWidthFilling);this.currentValue<e&&(this.currentValue+=t,this.currentValue>e&&(this.currentValue=e),this.game.time.events.add(10,function(){this.barFilling.scale.x=this.currentValue/this.maxValue*this.fullWidthFilling,this.currentValue<e&&this.changeRectBarTo(e,t)},this))}else{if(e<=this.minValue)return this.currentValue=this.minValue,void(this.barFilling.scale.x=0);this.currentValue>e&&(this.currentValue-=t,this.currentValue<e&&(this.currentValue=e),this.game.time.events.add(10,function(){this.barFilling.scale.x=this.currentValue/this.maxValue*this.fullWidthFilling,this.currentValue<e&&this.changeRectBarTo(e,t)},this))}}},{key:"changeCircleBarTo",value:function(e,t){if(e>this.currentValue){if(this.maskAngle.from>this.maskAngle.to)return this.barFilling.mask=null,this.arcMask.alpha=0,void(this.maskAngle.from=this.maskAngle.to);if(this.currentValue<e){this.currentValue+=t,this.currentValue>e&&(this.currentValue=e);var i=this.maskAngle.from+this.currentValue/this.maxValue*this.fullWidthFilling;this.game.time.events.add(10,function(){this.arcMask.arc(this.barFilling.x,this.barFilling.y,this.barFilling.width/2,this.game.math.degToRad(i),this.game.math.degToRad(this.maskAngle.from),!0),this.currentValue<e&&this.changeCircleBarTo(e,t)},this)}}else if(this.currentValue>e){this.currentValue-=t,this.currentValue<e&&(this.currentValue=e);var i=this.maskAngle.from+this.currentValue/this.maxValue*this.fullWidthFilling;this.game.time.events.add(10,function(){this.arcMask.arc(this.barFilling.x,this.barFilling.y,this.barFilling.width/2,this.game.math.degToRad(i),this.game.math.degToRad(this.maskAngle.from),!0),this.currentValue>e&&this.changeCircleBarTo(e,t)},this)}}},{key:"hide",value:function(){this.alpha=0}},{key:"show",value:function(){this.alpha=1}},{key:"getXCoord",value:function(){}},{key:"getYCoord",value:function(){}}]),t}(Phaser.Group);i.default=d},{"../utils/container-util":23,"../utils/util":26}],7:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../utils/container-util"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(s),u=e("../prefabs/collectible-counter"),c=function(e){return e&&e.__esModule?e:{default:e}}(u),h=function(e){function t(e,i){n(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.initSignals(),o.config=i,o.amount=o.config.initialValue,i.counter.initialValue=o.amount,i.counter.maxValue=o.config.valueRange.max,i.counter.minValue=o.config.valueRange.min,void 0!==i.counter&&(o.collectibleCounter=new c.default(o.game,i.counter),o.collectibleCounter.hide()),o.game.time.events.add(10,function(){this.onHudCreate.dispatch(i.counter.tag,this.collectibleCounter)},o),o}return o(t,e),r(t,[{key:"initSignals",value:function(){this.onHudCreate=new Phaser.Signal,this.onHudChange=new Phaser.Signal}},{key:"spawnCollectibles",value:function(e){for(var t=e.amount,i=e.lifetime,n=e.spawnArea,a=0;a<t;a++){var o=new Phaser.Sprite(this.game,0,0,this.config.src);this.game.add.existing(o),l.fitInContainer(o,this.config.htmlTag),o.x=l.getRandomXWithinContainer(n),o.y=l.getRandomYWithinContainer(n),o.alpha=1,this.collectibleItemAppear(o,200*Math.random(),i,n),o.inputEnabled=!0,o.input.useHandCursor=!0,o.events.onInputDown.add(function(e){this.collectItem(e)},this)}}},{key:"collectibleItemAppear",value:function(e,t,i,n){var a=e.x,o=e.y,r=e.scale.x;e.x=l.getXCenterWithinContainer(n),e.y=l.getYCenterWithinContainer(n),e.scale.x=.001,e.scale.y=.001,this.game.add.tween(e).to({x:a,y:[.3*l.getYCenterWithinContainer(n),o]},500,Phaser.Easing.Quadratic.InOut,!0,t).onComplete.add(function(){this.game.time.events.add(i,function(){e.inputEnabled&&this.collectibleItemDisappear(e)},this)},this),this.game.add.tween(e.scale).to({x:r,y:r},200,Phaser.Easing.Quadratic.InOut,!0,t+100)}},{key:"collectItem",value:function(e){e.inputEnabled=!1,this.amount+=this.config.eachItemCountsAs,this.config.eachItemCountsAs>0&&this.amount>this.config.valueRange.max?this.amount=this.config.valueRange.max:this.config.eachItemCountsAs<0&&this.amount<this.config.valueRange.min&&(this.amount=this.config.valueRange.min),null!=this.collectibleCounter&&(this.onHudChange.dispatch(this.config.counter.tag,this.amount),this.onCollectEffect(e,this.config.onCollectEffects))}},{key:"collectibleItemDisappear",value:function(e){e.alpha=0,e.destroy()}},{key:"onCollectEffect",value:function(e,t){for(var i=0;i<t.length;i++)switch(t[i]){case"flyToGoal":this.flyToGoal(e)}}},{key:"flyToGoal",value:function(e){var t=this.collectibleCounter.x,i=this.collectibleCounter.y;this.game.add.tween(e).to({x:t,y:i},600,Phaser.Easing.Back.InOut,!0,0),this.game.add.tween(e.scale).to({x:.01,y:.01},200,Phaser.Easing.Quadratic.InOut,!0,400)}}]),t}(Phaser.Group);i.default=h},{"../prefabs/collectible-counter":6,"../utils/container-util":23}],8:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../utils/container-util"),u=n(l),c=e("../utils/animations-util"),h=(n(c),e("../utils/custom-png-sequences-renderer.js")),d=(n(h),function(e){function t(e){a(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.initSignals(),i.fxLayer=new Phaser.Group(i.game),i.button=new Phaser.Sprite(i.game,0,0,"cta"),i.initialCtaWidth=i.button.width,i.add(i.button),u.fitInContainer(i.button,"cta-container",.5,.5),i.button.bringToTop(),i.button.inputEnabled=!0,i.button.input.useHandCursor=!0,i.button.events.onInputDown.add(function(){this.onInteract.dispatch(),this.game.time.events.add(50,function(){doSomething("download")},this)},i),i}return r(t,e),s(t,[{key:"initSignals",value:function(){this.onInteract=new Phaser.Signal}},{key:"createTip",value:function(){this.tip=new Phaser.Sprite(this.game,0,0,"tip"),this.tip.anchor.set(.5),this.add(this.tip),this.tip.scale.x=.67*this.background.width/this.tip.width,this.tip.scale.y=this.tip.scale.x,this.tip.y=this.button.y+.2*this.button.height,this.tip.x=this.button.x+this.tip.width/2-.25*this.button.width}},{key:"showTip",value:function(){var e=this.tip.y;this.game.add.tween(this.tip).to({y:e-this.button.height},700,Phaser.Easing.Quadratic.InOut,!0,0),this.game.time.events.add(2500,function(){this.game.add.tween(this.tip).to({y:e},700,Phaser.Easing.Quadratic.InOut,!0,0)},this)}},{key:"createBackground",value:function(){var e=document.getElementById("cta-background"),t=e.offsetWidth*window.devicePixelRatio,i=e.offsetHeight*window.devicePixelRatio,n=e.getBoundingClientRect().left*window.devicePixelRatio,a=e.getBoundingClientRect().top*window.devicePixelRatio,o=new Phaser.BitmapData(this.game,"myBitmap",t,i),r=o.context.createLinearGradient(0,0,0,i);r.addColorStop(0,"#4835c4"),r.addColorStop(.1,"#412cad"),r.addColorStop(.5,"#362288"),r.addColorStop(1,"#362288"),o.context.fillStyle=r,o.context.fillRect(0,0,t,i),this.background=this.game.add.sprite(n,a,o,null,this),console.log(this.x+", "+this.y)}},{key:"fitInContainer",value:function(){this.container=document.getElementById("cta-container"),this.containerWidth=this.container.offsetWidth*window.devicePixelRatio,this.containerHeight=this.container.offsetHeight*window.devicePixelRatio;var e=this.container.getBoundingClientRect().left*window.devicePixelRatio,t=this.container.getBoundingClientRect().top*window.devicePixelRatio;this.x=e,this.y=t,this.scale.x=this.containerWidth/this.button.width,this.scale.y=this.scale.x}},{key:"animate",value:function(){var e=document.getElementById("cta-container-final"),t=e.offsetWidth*window.devicePixelRatio,i=e.getBoundingClientRect().left*window.devicePixelRatio,n=e.getBoundingClientRect().top*window.devicePixelRatio;console.log(t);var a=t/this.initialCtaWidth,o=this.button.scale.x;this.game.add.tween(this.button).to({x:i+this.button.width/o*a/2,y:n+this.button.height/o*a/2},1100,Phaser.Easing.Back.Out,!0,0),this.game.add.tween(this.button.scale).to({x:a,y:a},900,Phaser.Easing.Quadratic.InOut,!0,0);this.spawnCookies(),this.game.time.events.add(1100,function(){this.startPulseIdleAnimation()},this)}},{key:"startPulseIdleAnimation",value:function(){this.buttonOver=new Phaser.Sprite(this.game,0,0,"cta-2"),this.buttonOver.anchor.set(.5,.5),this.buttonOver.x=this.button.x,this.buttonOver.y=this.button.y,this.buttonOver.scale.x=this.button.width/this.buttonOver.width,this.buttonOver.scale.y=this.buttonOver.scale.x,this.ctaLayer.add(this.buttonOver),this.buttonOver.alpha=0;var e=this.buttonOver.scale.x,t=this.game.add.tween(this.buttonOver).to({alpha:1},600,Phaser.Easing.Quadratic.InOut,!0,600).loop().yoyo(!0,0);this.game.add.tween(this.buttonOver.scale).to({x:1.05*e,y:1.05*e},600,Phaser.Easing.Quadratic.InOut,!0,600).loop().yoyo(!0,0),this.game.add.tween(this.button.scale).to({x:1.05*e,y:1.05*e},600,Phaser.Easing.Quadratic.InOut,!0,600).loop().yoyo(!0,0),this.game.time.events.add(200,function(){this.spawnCookies()},this),t.onLoop.add(function(){this.game.time.events.add(200,function(){this.spawnCookies()},this)},this)}}]),t}(Phaser.Group));i.default=d},{"../utils/animations-util":22,"../utils/container-util":23,"../utils/custom-png-sequences-renderer.js":24}],9:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../utils/tweener"),s=n(r),l=e("../utils/util"),u=n(l),c=function(){function e(t){a(this,e),this.game=t,this.customEffects=[],this.aboveGrp=this.game.add.group(),this.belowGrp=this.game.add.group(),this.sortLayers(),this.processEffects("begin"),this.game.onGameComplete.add(this.onGameComplete,this)}return o(e,[{key:"sortLayers",value:function(){this.game.world.bringToTop(this.aboveGrp),this.game.world.sendToBack(this.belowGrp)}},{key:"onInteract",value:function(){this.sortLayers(),this.processEffects("interaction"+this.game.global.interaction+"-start")}},{key:"onInteractionComplete",value:function(){this.sortLayers(),this.processEffects("interaction"+(this.game.global.interaction-1)+"-end")}},{key:"onGameComplete",value:function(){this.sortLayers(),this.processEffects("win")}},{key:"onFinalScene",value:function(){this.sortLayers(),this.processEffects("finalScene")}},{key:"processEffects",value:function(e){this.effects=this.getEffects(e);var t,i;this.customEffects.forEach(function(e,n){t=!0===Array.isArray(e.hideDelay)?e.hideDelay[n]:e.hideDelay||0,i=!0===Array.isArray(e.hideDuration)?e.hideDuration[n]:e.hideDuration||0,s.fadeOut(e.sprite,t,i,Phaser.Easing.Linear.None,!0)},this),this.effects.forEach(function(e){this.processEffect(e)},this)}},{key:"processEffect",value:function(e){var t=this.game.cache.checkImageKey(e.key),i=e.delay||0;Array.isArray(e.delay)&&(i=e.delay[e.index]),this.game.time.events.add(i,function(){!0===t?this.createAnimation(e):this.createItem(e),this.doAnimation(e)},this)}},{key:"createItem",value:function(e){var t=new Phaser.Sprite(this.game,0,0,"sprites",e.key+".png");u.spriteToDom(e.htmlId,t),t.anchor.set(void 0!==e.anchorX?e.anchorX:.5,void 0!==e.anchorY?e.anchorY:.5),e.sprite=t,!0===e.below?this.belowGrp.add(t):this.aboveGrp.add(t),this.customEffects.push(e)}},{key:"createAnimation",value:function(e){var t=new Phaser.Sprite(this.game,0,0,e.key);u.animToDom(e.htmlId,t),t.anchor.set(void 0!==e.anchorX?e.anchorX:.5,void 0!==e.anchorY?e.anchorY:.5);var i=t.animations.add("anim");t.animations.play("anim",e.fps,e.loop,!0),e.sprite=t,!0===e.below?this.belowGrp.add(t):this.aboveGrp.add(t),!0===e.randomPosition&&(t.x=u.rndInt(this.game.world.width,0),t.y=u.rndInt(this.game.world.height,0),!0===e.randomAngle&&(t.angle=u.rndInt(360,0)),!0===e.loop&&i.onLoop.add(function(t){t.x=u.rndInt(this.game.world.width,0),t.y=u.rndInt(this.game.world.height,0),!0===e.randomAngle&&(t.angle=u.rndInt(360,0))},this)),this.customEffects.push(e)}},{key:"doAnimation",value:function(e){var t,i,n,a,o,r,l,c,h,d,f,g;(e.animations||[]).forEach(function(p){if("fadeIn"===p.animation&&(e.sprite.alpha=0),t=p.delay||0,i=p.duration||0,n=u.getEasing(p.easing||"Linear"),a=void 0!==p.x?u.toPerc(p.x):0,o=void 0!==p.y?u.toPerc(p.y):0,r=p.angle||0,c=p.toScale||1,h=p.endScale||1,l=p.htmlId||"",d=p.xScale||1,f=p.yScale||1,"swing"==p.onComplete){g=s.jiggleAngle(e.sprite,30,.6*i,.5,0)}switch(p.animation){case"moveTo":a=e.sprite.x+e.sprite.width*a,o=e.sprite.y+e.sprite.height*o,s.moveTo(e.sprite,a,o,t,i,n,g);break;case"fade":s.fade(e.sprite,void 0,t,i,n);break;case"fadeIn":s.fadeIn(e.sprite,t,i,n);break;case"fadeOut":s.fadeOut(e.sprite,t,i,n);break;case"scaleTo":s.scaleTo(e.sprite,a,o,t,i,n);break;case"scaleIn":s.scaleIn(e.sprite,t,i,n);break;case"moveToDom":s.moveToDom(e.sprite,l,t,i,n);break;case"bulge":s.bulge(e.sprite,t,i);break;case"spinIn":s.spinIn(e.sprite,t,i);break;case"wobbleScaleIn":s.wobbleScaleIn(e.sprite,r,c,h);break;case"jiggle":s.jiggle(e.sprite,d,f,i);break;case"jiggleAngle":s.jiggleAngle(e.sprite,r,i);break;case"scaleThenFade":s.scaleThenFade(e.sprite,t,i)}},this)}},{key:"convertPercentToTweenPixels",value:function(e,t,i){e=e||"0%";var n=.01*Number(e.replace("%","")),a=n<0?"-":"+";n=Math.abs(n);var o=i?t.height*n:t.width*n;return o=a+o}},{key:"getEffects",value:function(e){var t,i=[];for(var n in PiecSettings.customEffects)PiecSettings.customEffects.hasOwnProperty(n)&&PiecSettings.customEffects[n].showOn===e&&(t=u.clone(PiecSettings.customEffects[n]),t.key=n,!0===Array.isArray(t.htmlId)?t.htmlId.forEach(function(e,n){t=u.clone(t),t.htmlId=e,t.index=n,i.push(t)},this):i.push(t));return i}}]),e}();i.default=c},{"../utils/tweener":25,"../utils/util":26}],10:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../utils/container-util"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(s),u=function(e){function t(e,i){n(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.initSignals(),o.button=new Phaser.Sprite(o.game,0,0,i.src),o.button.anchor.set(.5),o.button.x+=o.button.width/2,o.button.y+=o.button.height/2,o.add(o.button),l.fitInContainer(o.button,i.container),o.button.inputEnabled=!0,o.button.input.useHandCursor=!0,o.button.events.onInputDown.add(function(){this.onInteract.dispatch(this)},o),o}return o(t,e),r(t,[{key:"initSignals",value:function(){this.onInteract=new Phaser.Signal,this.onFail=new Phaser.Signal}},{key:"hide",value:function(){this.alpha>0&&(this.alpha=0)}},{key:"show",value:function(){this.alpha<1&&(this.alpha=1)}},{key:"disable",value:function(){this.button.inputEnabled&&(this.button.inputEnabled=!1),this.hide()}},{key:"enable",value:function(){this.button.inputEnabled||(this.button.inputEnabled=!0),this.show()}}]),t}(Phaser.Group);i.default=u},{"../utils/container-util":23}],11:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),
t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../utils/container-util"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(s),u=function(e){function t(e){n(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.logo=i.game.add.sprite(0,0,"logo"),i.add(i.logo),i.initialLogoWidth=i.logo.width,l.fitInContainer(i.logo,"logo",.5,.5),i.logo.bringToTop(),i}return o(t,e),r(t,[{key:"animate",value:function(){var e=document.getElementById("logo-final"),t=e.offsetWidth*window.devicePixelRatio,i=e.getBoundingClientRect().left*window.devicePixelRatio,n=e.getBoundingClientRect().top*window.devicePixelRatio,a=t/this.initialLogoWidth;this.game.add.tween(this.logo).to({x:i,y:n},1400,Phaser.Easing.Quadratic.InOut,!0,0),this.game.add.tween(this.logo.scale).to({x:a,y:a},1400,Phaser.Easing.Quadratic.InOut,!0,0)}}]),t}(Phaser.Group);i.default=u},{"../utils/container-util":23}],12:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../utils/container-util"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(s),u=function(e){function t(e,i){n(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.initSignals(),o.MINIMUM_SWIPE_LENGTH=10,o.containerName=i.container,o.getContainerInfo(),o.projectiles=[],o.createProjectiles(i.src,i.amount,i.direction),o.interactionDuration=i.interactionDuration,o.triggered=!1,o.createInteractionArea(),o}return o(t,e),r(t,[{key:"initSignals",value:function(){this.onSuccess=new Phaser.Signal,this.onFail=new Phaser.Signal}},{key:"getContainerInfo",value:function(){this.containerWidth=l.getContainerWidth(this.containerName),this.containerHeight=l.getContainerHeight(this.containerName),this.x=l.getContainerX(this.containerName),this.y=l.getContainerY(this.containerName)}},{key:"createInteractionArea",value:function(){var e=this.game.add.graphics(0,0);e.beginFill(0,.3),e.drawRect(0,0,this.containerWidth,this.containerHeight),this.interactionArea=e,this.interactionArea.inputEnabled=!0,this.interactionArea.input.useHandCursor=!0,this.interactionArea.events.onInputDown.add(this.onDown,this),this.interactionArea.events.onInputUp.add(this.onUp,this),this.add(this.interactionArea)}},{key:"createProjectiles",value:function(e,t,i){for(var n=0;n<t;n++){var a=new Phaser.Sprite(this.game,0,0,e);switch(this.add(a),a.scale.x=this.containerWidth/1.5/a.width,a.scale.y=a.scale.x,a.x=this.game.global.windowWidth+a.width,a.y=this.containerHeight/t*n,i){case"inverse":a.scale.x*=-1;break;case"random":a.scale.x*=Math.floor(2*Match.random()-1);break;case"same":a.scale.x*=1;default:console.log("please set the projectile direction")}this.projectiles.push(a)}}},{key:"checkCollision",value:function(e){if(void 0==this.startSwipePoint)return!1;if(this.endSwipePoint=new Phaser.Point(this.game.input.activePointer.position.x,this.game.input.activePointer.position.y),Phaser.Point.distance(this.endSwipePoint,this.startSwipePoint)>=this.MINIMUM_SWIPE_LENGTH){this.swipe=new Phaser.Line(this.startSwipePoint.x,this.startSwipePoint.y,this.endSwipePoint.x,this.endSwipePoint.y);var t=new Phaser.Line(e.x,e.y,e.x+e.width,e.y),i=new Phaser.Line(e.x,e.y,e.x,e.y+e.height),n=new Phaser.Line(e.x+e.width,e.y,e.x+e.width,e.y+e.height),a=new Phaser.Line(e.x,e.y+e.height,e.x+e.width,e.y+e.height);this.swipe.intersects(t,!0)||this.swipe.intersects(i)||this.swipe.intersects(n)||this.swipe.intersects(a);this.game.debug.geom(t,"rgba(255,0,0,1)"),this.game.debug.geom(i,"rgba(255,255,0,1)"),this.game.debug.lineInfo(t,32,32),this.game.debug.lineInfo(i,32,100),this.game.debug.geom(this.swipe,"rgba(255,255,255,1)"),console.log(e),console.log(this.swipe),console.log(this.swipe.intersects(t,!0))}}},{key:"onUp",value:function(){Phaser.Point.distance(this.game.input.activePointer.position,this.game.input.activePointer.positionDown)>150&&(this.game.input.activePointer.position.y<this.swipeCoord.y?(this.updateProjectiles("up"),this.game.time.events.remove(this.failListener),this.onSuccess.dispatch(this)):(this.updateProjectiles("down"),this.game.time.events.remove(this.failListener),this.onSuccess.dispatch(this)))}},{key:"onDown",value:function(){this.startSwipePoint=new Phaser.Point(this.game.input.activePointer.position.x,this.game.input.activePointer.position.y),this.swipeCoord={x:this.game.input.activePointer.position.x,y:this.game.input.activePointer.position.y}}},{key:"updateProjectiles",value:function(e){switch(e){case"up":for(var t=0;t<this.projectiles.length;t++){var i=this.projectiles[t],n=this.angle;this.game.add.tween(i).to({y:-1e3,angle:[n+=120]},1e3,Phaser.Easing.Linear.out,!0,100*t)}break;case"down":for(var t=0;t<this.projectiles.length;t++){var i=this.projectiles[t],n=this.angle;this.game.add.tween(i).to({y:this.game.global.windowHeight+1e3,angle:[n-=120]},1e3,Phaser.Easing.Linear.out,!0,100*t)}}}},{key:"hide",value:function(){this.alpha>0&&(this.alpha=0)}},{key:"show",value:function(){this.alpha<1&&(this.alpha=1),this.triggered||this.fly()}},{key:"fly",value:function(){this.triggered=!0;for(var e=0;e<this.projectiles.length;e++){var t=this.projectiles[e];this.game.add.tween(t).to({x:this.x},this.interactionDuration/2,Phaser.Easing.Linear.In,!0,1e3+100*e).onComplete.add(function(e){e.alpha=0}),console.log("interactionDuration"+this.interactionDuration)}this.failListener=this.game.time.events.add(2*this.interactionDuration,function(){this.onFail.dispatch(this)},this)}},{key:"disable",value:function(){this.interactionArea.inputEnabled&&(this.interactionArea.inputEnabled=!1);for(var e=0;e<this.projectiles.length;e++){var t=this.projectiles[e];t.inputEnabled&&(t.inputEnabled=!1)}this.hide()}},{key:"enable",value:function(){this.interactionArea.inputEnabled||(this.interactionArea.inputEnabled=!0),this.show()}}]),t}(Phaser.Group);i.default=u},{"../utils/container-util":23}],13:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.container=t,this.video=document.getElementById(t),this.source=document.createElement("source"),this.video.appendChild(this.source),this.video.controls=!1,this.initSignals()}return a(e,[{key:"initSignals",value:function(){this.onComplete=new Phaser.Signal,this.onLoop=new Phaser.Signal}},{key:"play",value:function(e,t){if(void 0==this.videoName||this.videoName!=e){console.log("reloading"),this.videoName=e,this.source.setAttribute("src",e),this.video.load(),this.video.play(),this.video.currentTime=0,this.video.endTime=0;var i=this;this.video.addEventListener("loadeddata",function(){i.initVideoArgs(t)})}else this.video.play(),this.initVideoArgs(t)}},{key:"update",value:function(){this.videoEnded()&&(this.video.loop?(this.video.currentTime=this.video.initialTime,this.onLoop.dispatch()):(this.video.pause(),this.onComplete.dispatch())),!this.video.paused&&this.videoEnded()&&(this.video.pause(),this.onComplete.dispatch())}},{key:"videoEnded",value:function(){return this.video.ended||0!=this.video.endTime&&this.video.currentTime>=this.video.endTime}},{key:"initVideoArgs",value:function(e){void 0!==e&&(void 0!==e.from&&void 0!==e.to&&(this.video.initialTime=e.from,this.video.currentTime=e.from,this.video.endTime=e.to),void 0!==e.loop&&"boolean"==typeof e.loop?this.video.loop=e.loop:this.video.loop=!1)}}]),e}();i.default=o},{}],14:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=e("../prefabs/collectible-controller"),r=function(e){return e&&e.__esModule?e:{default:e}}(o),s=function(){function e(t){n(this,e),this.game=t,this.initSignals(),this.collectibleController=new r.default(this.game),this.collectibleList=[],this.collectibleListFired=[],this.setupController()}return a(e,[{key:"initSignals",value:function(){this.onHudCreate=new Phaser.Signal,this.onHudChange=new Phaser.Signal}},{key:"setupController",value:function(){this.collectibleController.onHudCreate.add(function(e,t){this.onHudCreate.dispatch(e,t)},this),this.collectibleController.onHudChange.add(function(e,t){this.onHudChange.dispatch(e,t)},this)}},{key:"update",value:function(e,t,i){if(void 0!==i){this.collectibleList!=i&&(this.collectibleList=i,this.collectibleListFired=[]);for(var n=0;n<i.length;n++){var a=i[n].tag;if(!this.collectibleListFired[n]&&t.evaluateConditions(i[n].conditions)&&this.checkIfCollectibleShouldBeFired(i[n],e)){this.collectibleListFired[n]=!0;var o=i[n].amount,r=1e3*(i[n].to-i[n].from),s=i[n].htmlTag;this.collectibleController.getCollectible(a).spawnCollectibles({amount:o,lifetime:r,spawnArea:s})}}}}},{key:"checkIfCollectibleShouldBeFired",value:function(e,t){return void 0!==e.from&&t>=e.from}}]),e}();i.default=s},{"../prefabs/collectible-controller":5}],15:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.game=t,this.hudObjects=[]}return a(e,[{key:"setupController",value:function(){this.variablesController.onInitVariables.add(function(e,t){this.addHudObject(e,t)},this),this.variablesController.onConsequencesChange.add(function(e,t){this.changeHudObjectValue(e,t)},this)}},{key:"addHudObject",value:function(e,t){this.hudObjects[e]=t,console.log(this.hudObjects)}},{key:"changeHudObjectValue",value:function(e,t){this.hudObjects[e].changeCounterTo(t,50)}},{key:"update",value:function(e,t,i){if(this.variablesController||(this.variablesController=t,this.setupController()),void 0!==i&&null!=i)for(var n=0;n<i.length;n++){var a=i[n].tag;null!=this.hudObjects[a]&&(t.evaluateConditions(i[n].conditions)&&this.checkIfHudShouldBeEnabled(i[n],e)?this.hudObjects[a].show():this.hudObjects[a].hide())}}},{key:"checkIfHudShouldBeEnabled",value:function(e,t){return!(void 0!==e.to&&t>e.to)&&(void 0!==e.from&&t>=e.from)}}]),e}();i.default=o},{}],16:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../prefabs/interactive-element"),s=n(r),l=e("../prefabs/projectile-game"),u=n(l),c=function(){function e(t,i){a(this,e),this.game=t,this.videoPlayableStateController=i,this.currentInteractions=null,this.interactiveElements=[],this.interacted=!1,this.coinsSpawned=!1,this.initSignals()}return o(e,[{key:"initSignals",value:function(){this.onInteract=new Phaser.Signal}},{key:"update",value:function(e,t,i){this.variablesController||(this.variablesController=t),this.currentInteractions!=i&&(this.currentInteractions=i,this.clearCurrentInteractiveElements(),this.createInteractiveElements(i));for(var n=0;n<i.length;n++){var a=i[n];this.checkIfInteractionShouldBeEnabled(a,e)&&t.evaluateConditions(i[n].conditions)?this.interactiveElements[n].enable():this.interactiveElements[n].disable()}}},{key:"clearCurrentInteractiveElements",value:function(){for(var e=this.interactiveElements.length,t=0;t<e;t++)this.interactiveElements[t].destroy();this.interactiveElements=[]}},{key:"calculateDuration",value:function(e,t){var i=t-e;return 1e3*parseInt(i)+30*(i-parseInt(i))}},{key:"createInteractiveElements",value:function(e){for(var t=0;t<e.length;t++){var i,n=e[t];if(i=void 0!==n.to?this.calculateDuration(n.from,n.to):null,"tap"==n.typeOfInteraction){var a=new s.default(this.game,{src:n.src,container:n.htmlTag});a.onSuccess=n.onSuccess,a.consequences=n.consequences,this.game.add.existing(a),this.interactiveElements[t]=a,a.hide(),a.disable(),void 0!==a&&a.onInteract.add(function(e){this.interacted=!0,this.variablesController.applyConsequences(e.consequences),this.onInteract.dispatch(e.onSuccess)},this)}else if("minigame"==n.typeOfInteraction){var o=PiecSettings.minigames[n.gameTag];switch(n.gameTag){case"projectile":var r=new u.default(this.game,{src:o.src,amount:o.amount,direction:o.direction,interactionDuration:i,container:n.htmlTag});r.successConsequences=n.successConsequences,r.successScript=n.onSuccess,r.failConsequences=n.failConsequences,r.failScript=n.onFail,this.game.add.existing(r),this.interactiveElements[t]=r,r.hide(),r.disable(),r.onSuccess.add(function(e){void 0!==e.successConsequences&&this.variablesController.applyConsequences(e.successConsequences),void 0!==e.successScript&&this.onInteract.dispatch(e.successScript),r.disable()},this),r.onFail.add(function(e){console.log("onFail"),r.disable(),void 0!==e.failConsequences&&this.variablesController.applyConsequences(e.failConsequences),void 0!==e.failScript&&this.onInteract.dispatch(e.failScript)},this);break;default:console.log("gameTag undefined")}}}}},{key:"checkIfInteractionShouldBeEnabled",value:function(e,t){return!(void 0!==e.to&&t>e.to)&&(void 0!==e.from&&t>=e.from)}}]),e}();i.default=c},{"../prefabs/interactive-element":10,"../prefabs/projectile-game":12}],17:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=e("../prefabs/video-playable-interactive-elements-controller"),s=n(r),l=e("../prefabs/video-playable-collectible-controller"),u=n(l),c=e("../prefabs/audio-controller"),h=n(c),d=e("../prefabs/video-controller"),f=n(d),g=e("../prefabs/video-playable-hud-controller"),p=n(g),m=e("../prefabs/video-playable-variables-controller"),v=n(m),b=e("../utils/video-playable-util"),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(b),w=function(){function e(t,i,n,o,r,l,c){a(this,e),this.game=t,this.initialState=n,this.scripts=o,this.firstInteraction=!1,this.audios=l,this.currentAudio=this.audios[c],this.videoController=new f.default(i),this.audioController=new h.default,this.interactiveElementsController=new s.default(this.game,this),this.videoPlayableCollectibleController=new u.default(this.game),this.videoPlayableHudController=new p.default(this.game),this.videoPlayableVariablesController=new v.default(r),this.currentState=this.initialState,this.videoEnd=!1,this.initSignals(),this.setupController()}return o(e,[{key:"initSignals",value:function(){this.onStateChange=new Phaser.Signal}},{key:"setupController",value:function(){this.videoController.onLoop.add(function(){},this),this.videoController.onComplete.add(function(){this.videoEnd=!0},this),this.interactiveElementsController.onInteract.add(function(e){this.firstInteraction||(this.firstInteraction=!0,this.playAudio(this.currentAudio)),this.cancelAutoPlayTimer(),this.transitionToState(e)},this),this.videoPlayableCollectibleController.onHudCreate.add(function(e,t){this.videoPlayableVariablesController.initVariables(e,t)},this),this.videoPlayableCollectibleController.onHudChange.add(function(e,t){var i=e.replace("-counter","");this.videoPlayableVariablesController.setVariable(i,t)},this)}},{key:"update",value:function(){if(this.videoEnd&&(this.videoEnd=!1,this.currentState?this.transitionToState(this.currentState.autoplay.script):this.game.global.gameComplete||(this.game.global.gameComplete=!0,this.game.onGameComplete.dispatch())),this.videoController.update(),this.currentState?(this.interactiveElementsController.update(this.videoController.video.currentTime,this.videoPlayableVariablesController,this.currentState.interactions,this.currentState.autoplay),this.videoPlayableHudController.update(this.videoController.video.currentTime,this.videoPlayableVariablesController,this.currentState.hud),this.videoPlayableCollectibleController.update(this.videoController.video.currentTime,this.videoPlayableVariablesController,this.currentState.collectibles)):this.game.global.gameComplete||(this.game.global.gameComplete=!0,this.game.onGameComplete.dispatch()),void 0!==this.currentAudio.nextAudio&&""!=this.currentAudio.nextAudio){var e=this.audios[this.currentAudio.nextAudio];y.checkIfShouldBeEnabled(e.endTime,e.startTime,this.videoController.video.currentTime)&&(this.audioController.pause(this.currentAudio.src),this.currentAudio=this.audios[this.currentAudio.nextAudio],this.playAudio(this.currentAudio))}}},{key:"transitionToState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""!=e){this.currentState=this.scripts[e];var t=PiecSettings.assetsDir+this.currentState.video;this.videoController.play(t,{from:this.currentState.from,to:this.currentState.to,loop:this.currentState.loop}),void 0!==this.currentState.autoplay&&void 0!==this.currentState.autoplay.after&&this.currentState.loop&&this.setAutoPlayTimer(this.currentState.autoplay)}else this.currentState=null}},{key:"playAudio",value:function(e){console.log("playAudio"),console.log(e);var t=e.src,i=e;this.game.time.events.add(500,function(){var e=PiecSettings.assetsDir+t;this.audioController.play(t,e,i)},this)}},{key:"pauseAllAudio",value:function(){this.audioController.muteAll()}},{key:"setAutoPlayTimer",value:function(e){console.log("setTimer"),this.autoplayTimer=this.game.time.events.add(e.after,function(){console.log("dispatch timer"),this.transitionToState(e.script)},this)}},{key:"cancelAutoPlayTimer",value:function(){console.log("remove"),void 0!==this.autoplayTimer&&this.game.time.events.remove(this.autoplayTimer)}}]),e}();i.default=w},{"../prefabs/audio-controller":4,"../prefabs/video-controller":13,"../prefabs/video-playable-collectible-controller":14,"../prefabs/video-playable-hud-controller":15,"../prefabs/video-playable-interactive-elements-controller":16,"../prefabs/video-playable-variables-controller":18,"../utils/video-playable-util":27}],18:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.initSignals(),this.variables=[];for(var i in t)this.variables[i]=t[i]}return a(e,[{key:"initSignals",value:function(){this.onInitVariables=new Phaser.Signal,this.onConsequencesChange=new Phaser.Signal}},{key:"initVariables",value:function(e,t){console.log("initVariables in variables"),console.log(e),console.log(t);var i=e.replace("-counter","");this.variables[i]||(this.variables[i]={},this.variables[i].value=t.currentValue,this.variables[i].updateHud=e,this.onInitVariables.dispatch(e,t))}},{key:"applyConsequences",value:function(e){if(console.log("Applying consequences"),console.log(e),void 0!==e){var t=e.split(";");console.log(t);for(var i=0;i<t.length;i++){var n=t[i];console.log(n),console.log(n.includes("=")),n.includes("--")?this.decreaseVariable(n.split("--")[0],1):n.includes("-=")?this.decreaseVariable(n.split("-=")[0],n.split("-=")[1]):n.includes("++")?this.increaseVariable(n.split("++")[0],1):n.includes("+=")?this.increaseVariable(n.split("+=")[0],n.split("+=")[1]):n.includes("=")&&this.setVariable(n.split("=")[0],n.split("=")[1])}}console.log("VARIABLES"),console.log(this.variables)}},{key:"increaseVariable",value:function(e,t){if(null!=this.variables[e]){var i=parseFloat(this.variables[e].value)+parseFloat(t);this.variables[e].value=i;var n=this.variables[e].updateHud;void 0!==n&&this.onConsequencesChange.dispatch(n,i)}}},{key:"decreaseVariable",value:function(e,t){if(null!=this.variables[e]){var i=parseFloat(this.variables[e].value)-parseFloat(t),n=this.variables[e].updateHud;void 0!==n&&this.onConsequencesChange.dispatch(n,i)}}},{key:"setVariable",value:function(e,t){if(console.log("set variables"+e),console.log(this.variables[e]),null!=this.variables[e]){this.variables[e].value=t;var i=this.variables[e].updateHud;void 0!==i&&this.onConsequencesChange.dispatch(i,t)}}},{key:"evaluateConditions",value:function(e){var t=!0;if(void 0!==e)for(var i=e.split("&&"),n=0;n<i.length;n++){var a=i[n];a.includes("==")?t&=this.variableEqualTo(a.split("==")[0],a.split("==")[1]):a.includes(">=")?t&=this.variableBiggerThanOrEqualTo(a.split(">=")[0],a.split(">=")[1]):a.includes("<=")?t&=this.variableSmallerThanOrEqualTo(a.split("<=")[0],a.split("<=")[1]):a.includes(">")?t&=this.variableBiggerThan(a.split(">")[0],a.split(">")[1]):a.includes("<")&&(t&=this.variableSmallerThan(a.split("<")[0],a.split("<")[1]))}return t}},{key:"variableBiggerThan",value:function(e,t){return this.variables[e].value>t}},{key:"variableBiggerThanOrEqualTo",value:function(e,t){return this.variables[e].value>=t}},{key:"variableSmallerThan",value:function(e,t){return this.variables[e].value<t}},{key:"variableSmallerThanOrEqualTo",value:function(e,t){return this.variables[e].value<=t}},{key:"variableEqualTo",value:function(e,t){return this.variables[e].value==t}}]),e}();i.default=o},{}],19:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),r(t,[{key:"preload",value:function(){}},{key:"init",value:function(){PiecSettings.assetsDir="dev"===PiecSettings.env?"assets/":"";var e=this.game;e.onInteract=new Phaser.Signal,e.onGameComplete=new Phaser.Signal,e.onClose=new Phaser.Signal,"undefined"!=typeof piec&&(piec.lockGame=function(){e.global.locked=!0},piec.unlockGame=function(){e.global.locked=!1},piec.destroyGame=function(){e.destroy()},piec.onClose=function(){e.onClose.dispatch()}),window.onresize=function(){e.scale.setGameSize(document.body.clientWidth*window.devicePixelRatio,document.body.clientHeight*window.devicePixelRatio),e.scale.refresh(),e.state.start("boot",!0,!1)}}},{key:"create",value:function(){this.init(),this.game.input.maxPointers=1,this.initGlobalVariables(),this.game.state.start("preloader"),this.game.onMoveStart=function(e){e.global.interactions++,PiecSettings&&PiecSettings.onMoveStart&&PiecSettings.onMoveStart(e.global.interactions)},this.game.onMoveComplete=function(e){PiecSettings&&PiecSettings.onMoveComplete&&PiecSettings.onMoveComplete(e.global.moveStats)}}},{key:"initGlobalVariables",value:function(){this.game.global={interaction:0,gameComplete:!1,currentVideoScript:null}}}]),t}(Phaser.State);i.default=s},{}],20:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=e("../prefabs/cta-button"),c=a(u),h=e("../prefabs/logo"),d=(a(h),e("../prefabs/custom-effects")),f=a(d),g=e("../prefabs/video-playable-state-controller"),p=a(g),m=e("../utils/custom-png-sequences-renderer.js"),v=(n(m),e("../utils/tweener")),b=n(v),y=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return s(t,e),l(t,[{key:"create",value:function(){this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.setUserScale(1/window.devicePixelRatio,1/window.devicePixelRatio,0,0),this.game.global.windowWidth=document.body.clientWidth*window.devicePixelRatio,this.game.global.windowHeight=document.body.clientHeight*window.devicePixelRatio,this.game.onGameComplete.add(this.onGameComplete,this),this.game.onClose.add(this.closeAndMute,this),this.cta=new c.default(this.game),this.game.add.existing(this.cta),this.customEffects=new f.default(this.game),void 0!==PiecSettings.timer&&this.game.time.events.add(4e3,function(){document.getElementById("vungle-close").className="visible"},this),this.videoPlayableStateController=new p.default(this.game,"videoBg",PiecSettings.script[PiecSettings.initialScript],PiecSettings.script,PiecSettings.variables,PiecSettings.audios,PiecSettings.initialAudio),this.videoPlayableStateController.transitionToState(PiecSettings.initialScript),this.setController()}},{key:"setController",value:function(){this.cta.onInteract.add(function(){this.videoPlayableStateController.pauseAllAudio()},this)}},{key:"resize",value:function(){}},{key:"render",value:function(){}},{key:"update",value:function(){this.videoPlayableStateController.update()}},{key:"closeAndMute",value:function(){this.videoPlayableStateController.pauseAllAudio()}},{key:"onGameComplete",value:function(){console.log("game completed"),b.moveToDom(this.cta.button,"cta-container-final",PiecSettings.ctaMoveDelay,PiecSettings.ctaMoveDuration,Phaser.Easing.Quadratic.Out,function(e){b[PiecSettings.ctaAnimation](e,PiecSettings.ctaAnimationDelay,PiecSettings.ctaAnimationDuration)})}}]),t}(Phaser.State);i.default=y},{"../prefabs/cta-button":8,"../prefabs/custom-effects":9,"../prefabs/logo":11,"../prefabs/video-playable-state-controller":17,"../utils/custom-png-sequences-renderer.js":24,"../utils/tweener":25}],21:[function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=e("../atlas/index"),u=(n(l),e("../utils/util")),c=(n(u),e("../utils/custom-png-sequences-renderer.js")),h=n(c),d=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.asset=null,e}return r(t,e),s(t,[{key:"preload",value:function(){this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources(),h.preloadPngSequences(this.game)}},{key:"update",value:function(){}},{key:"loadResources",value:function(){document.getElementById("logo")&&this.game.load.image("logo",PiecSettings.assetsDir+"logo.png"),this.game.load.image("cta",PiecSettings.assetsDir+"cta.png"),this.game.load.image("spin",PiecSettings.assetsDir+"spin.png")}},{key:"onLoadComplete",value:function(){this.game.state.start("endcard")}}]),t}(Phaser.State);i.default=d},{"../atlas/index":1,"../utils/custom-png-sequences-renderer.js":24,"../utils/util":26}],22:[function(e,t,i){"use strict";function n(e,t){e.loopReverse&&(e.animations.currentAnim.isReversed=!0),0!=t.loopCount&&t.loopCount===e.numberOfLoops&&(e.persistent||(t.loop=!1,e.alpha=0))}function a(e,t,i,n,a){t.loopReverse=a,t.speed=n,t.loopReverse?e.time.events.add(i,function(){t.alpha=1,t.animations.play("animation",n,!1),t.animations.currentAnim.onComplete.add(o,this)}):e.time.events.add(i,function(){t.alpha=1,t.animations.play("animation",n,!0)})}function o(e,t){e.animations.currentAnim.isReversed=!e.animations.currentAnim.isReversed,e.animations.play("animation",e.speed,!1)}function r(e,t,i,o,r,s,l,u,c,h,d,f){
for(var g=h.offsetWidth*window.devicePixelRatio,p=h.offsetHeight*window.devicePixelRatio,m=h.offsetLeft*window.devicePixelRatio,v=h.offsetTop*window.devicePixelRatio,b=g/100,y=p/100,w=[],P=0;P<t.length;P++){var C=d.add.sprite(m+t[P]*b,v+i[P]*y,e);f.add(C),C.anchor.set(s),C.animations.add("animation"),C.alpha=0,C.persistent=c,a(d,C,o[P],l,!1),C.scale.x=g*u[P]/100/C.width,C.scale.y=C.scale.x,w.push(C),null!=r&&(C.numberOfLoops=r[P],C.animations.currentAnim.onLoop.add(n,this))}return w}function s(e,t,i,n,a,o){var r=t.scale.x;t.scale.x=.01,t.scale.y=.01,e.time.events.add(n,function(){e.add.tween(t.scale).to({x:r,y:r},i,Phaser.Easing.Back.Out,!0,0).onComplete.add(function(){e.time.events.add(a,function(){e.add.tween(t).to({alpha:0},i,Phaser.Easing.Quadratic.In,!0,0).onComplete.add(function(){t.destroy()},this)},this)},this)},this)}function l(e,t,i,n,a,o,r,s){e.time.events.add(r,function(){t.alpha=1,e.add.tween(t).to({y:n,x:i},o,s,!0,0),e.add.tween(t.scale).to({x:a,y:a},o,s,!0,0)},this),e.time.events.add(9e3+r,function(){e.add.tween(t).to({alpha:0},1e3,Phaser.Easing.Quadratic.InOut,!0,0),e.time.events.add(1e3,function(){t.destroy()},this)},this)}function u(e,t,i,n,a,o,r,s){e.time.events.add(r,function(){t.alpha=0,e.add.tween(t).to({alpha:[.5,1,0],y:n,x:i,angle:180},o,s,!0,0),e.add.tween(t.scale).to({x:a,y:a},o,s,!0,0)},this)}function c(e,t,i,n,a,o,r){this.starFloatWithDelayCustom(e,t,i,n,a,o,r,Phaser.Easing.Quadratic.Out)}Object.defineProperty(i,"__esModule",{value:!0}),i.onLoop=n,i.playAnimation=a,i.onComplete=o,i.playAnimations=r,i.spawnAndDissapear=s,i.starFloatWithDelayCustom2=l,i.starFloatWithDelayCustom=u,i.starFloatWithDelay=c},{}],23:[function(e,t,i){"use strict";function n(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=document.getElementById(t),o=a.offsetWidth*window.devicePixelRatio,r=a.offsetHeight*window.devicePixelRatio,s=a.getBoundingClientRect().left*window.devicePixelRatio,l=a.getBoundingClientRect().top*window.devicePixelRatio;void 0!=e.anchor&&e.anchor.set(i,n),e.x=s+o*i,e.y=l+r*n,e.scale.x=o/e.width,e.scale.y=e.scale.x}function a(e,t){var i=document.getElementById(t),n=(i.offsetWidth,window.devicePixelRatio,i.offsetHeight*window.devicePixelRatio),a=i.getBoundingClientRect().left*window.devicePixelRatio,o=i.getBoundingClientRect().top*window.devicePixelRatio;e.x=a,e.y=o,e.scale.y=n/e.height,e.scale.x=e.scale.y}function o(e,t){n(e,t),e.x+=e.width/2,e.y+=e.height/2}function r(e){return document.getElementById(e).getBoundingClientRect().top*window.devicePixelRatio}function s(e){return document.getElementById(e).getBoundingClientRect().left*window.devicePixelRatio}function l(e){return document.getElementById(e).offsetWidth*window.devicePixelRatio}function u(e){return document.getElementById(e).offsetHeight*window.devicePixelRatio}function c(e,t){var i=document.getElementById(t),n=i.offsetWidth*window.devicePixelRatio;i.offsetHeight,window.devicePixelRatio;e.scale.x=n/e.width,e.scale.y=e.scale.x}function h(e){var t=document.getElementById(e),i=t.offsetWidth*window.devicePixelRatio,n=(t.offsetHeight,window.devicePixelRatio,t.getBoundingClientRect().left*window.devicePixelRatio);t.getBoundingClientRect().top,window.devicePixelRatio;return n+Math.random()*i}function d(e){var t=document.getElementById(e),i=(t.offsetWidth,window.devicePixelRatio,t.offsetHeight*window.devicePixelRatio);t.getBoundingClientRect().left,window.devicePixelRatio;return t.getBoundingClientRect().top*window.devicePixelRatio+Math.random()*i}function f(e){var t=document.getElementById(e),i=t.offsetWidth*window.devicePixelRatio;return t.getBoundingClientRect().left*window.devicePixelRatio+i/2}function g(e){var t=document.getElementById(e),i=t.offsetHeight*window.devicePixelRatio;return t.getBoundingClientRect().top*window.devicePixelRatio+i/2}Object.defineProperty(i,"__esModule",{value:!0}),i.fitInContainer=n,i.fitInContainerHeight=a,i.fitInContainerAnchorAtCenter=o,i.getContainerY=r,i.getContainerX=s,i.getContainerWidth=l,i.getContainerHeight=u,i.resizeToSizeOfContainer=c,i.getRandomXWithinContainer=h,i.getRandomYWithinContainer=d,i.getXCenterWithinContainer=f,i.getYCenterWithinContainer=g},{}],24:[function(e,t,i){"use strict";function n(e){if(null!=PiecSettings.pngAnimations)for(var t=0;t<PiecSettings.pngAnimations.length;t++){var i=PiecSettings.pngAnimations[t];a(e,i)}}function a(e,t){var i=t.src.substr(0,t.src.indexOf("."));e.load.spritesheet(i,PiecSettings.assetsDir+t.src,t.spriteWidth,t.spriteHeight,t.spriteNumber)}function o(e,t,i){var n=t.src.substr(0,t.src.indexOf("."));if(null!=t.htmlContainer)var a=document.getElementById(t.htmlContainer),o=a.offsetWidth*window.devicePixelRatio,r=(a.offsetHeight,window.devicePixelRatio,a.getBoundingClientRect().left*window.devicePixelRatio),l=a.getBoundingClientRect().top*window.devicePixelRatio;var u=e.add.sprite(r,l,n);if(i.add(u),u.animations.add("animation"),u.anchor.set(0,0),u.alpha=0,null==t.loopReverse&&(t.loopReverse=!1),null!=t.isReversed&&t.isReversed&&(u.animations.currentAnim.isReversed=!0),s.playAnimation(e,u,t.delay,t.fps,t.loopReverse),null!=t.angle&&0!=t.angle){var c=0;this.game.global.windowWidth>this.game.global.windowHeight&&null!=t.responsiveAngle&&t.responsiveAngle&&(c=90),u.anchor.set(.5),u.angle=t.angle+c}if(null!=t.htmlContainer&&(u.scale.x=o/u.width,u.scale.y=u.scale.x,u.persistent=!1),null!=t.loops&&(u.numberOfLoops=t.loops,u.animations.currentAnim.onLoop.add(s.onLoop,this)),null!=t.effect&&-1!=t.effect.indexOf("fade-in")){u.alpha=0;e.add.tween(u).to({alpha:1},1e3,Phaser.Easing.Linear.None,!0,t.delay)}return u}Object.defineProperty(i,"__esModule",{value:!0}),i.preloadPngSequences=n,i.playPngSequence=o;var r=e("../utils/animations-util.js"),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(r)},{"../utils/animations-util.js":22}],25:[function(e,t,i){"use strict";function n(e,t,i,n,a,o,r,s){if(null===e||null===e.game)return null;var l=e.game.add.tween(e).to({x:t,y:i},a,o,void 0===s||s,n);return r&&l.onComplete.add(r,this),l}function a(e,t,i,n,a,o,r){if(null===e||null===e.game)return null;var s={};null!==t&&(s={alpha:t});var l=e.game.add.tween(e).to(s,0===n?1:n,a,void 0===o||o,i);return r&&l.onComplete.add(r,this),l}function o(e,t,i,n,a,o){return this.fade(e,1,t,i,n,a,o)}function r(e,t,i,n,a,o){return this.fade(e,0,t,i,n,a,o)}function s(e,t,i,n,a,o,r){if(null===e||null===e.game)return null;var s=e.game.add.tween(e.scale).to({x:t,y:i},a,o,!0,n);return r&&s.onComplete.add(r,this),s}function l(e,t,i,n,a,o){if(null===e||null===e.game)return null;var r=document.getElementById(t),s=r.getBoundingClientRect(),l=this.getScaleFromDom(t,e);this.moveTo(e,(s.left+.5*s.width)*window.devicePixelRatio,(s.top+.5*s.height)*window.devicePixelRatio,i,n,a,o),this.scaleTo(e,l,l,i,n,a)}function u(e,t){var i=document.getElementById(e),n=i.getBoundingClientRect(),a=n.width*window.devicePixelRatio/t._frame.width;return!1==t._frame.height*a<=n.height*window.devicePixelRatio&&(a=n.height*window.devicePixelRatio/t._frame.height),a}function c(e,t,i){if(null===e||null===e.game)return null;e.game.add.tween(e.scale).to({x:1.2*e.scale.x,y:1.2*e.scale.x},i,Phaser.Easing.Quadratic.InOut,!0,t,-1,!0)}function h(e,t,i){if(null===e||null===e.game)return null;var n=e.scale.x,a=e.scale.y;e.angle=0,e.scale.x=0,e.scale.y=0,e.game.add.tween(e.scale).to({x:n,y:a},i,Phaser.Easing.Quadratic.InOut,!0,t),e.game.add.tween(e).to({angle:360},i,Phaser.Easing.Back.InOut,!0,t)}function d(e,t,i,n,a){if(null===e||null===e.game)return null;i=e.scale.x*i,n=e.scale.x*n;var o=e.game.add.tween(e.scale).to({x:i,y:i},500,Phaser.Easing.Quadratic.Out,!0,0),r=e.game.add.tween(e.scale).to({x:n,y:n},500,Phaser.Easing.Quadratic.In,!1,0);o.chain(r);var s=e.game.add.tween(e).to({angle:15},500,function(e){return Math.sin(2*Math.PI*e)},!0,0,1);a&&s.onComplete.add(function(){a(e)},this)}function f(e,t,i,n){var a=e.scale.x,o=e.scale.y;e.game.add.tween(e.scale).to({x:a*(t||1.1),y:o*(i||.9)},n||800,Phaser.Easing.Linear.None,!0,0,-1).yoyo(!0,0)}function g(e,t,i,n,a){t=t||10;var o=e.angle,r=o+t;e.angle-=t,null!=n&&(e.anchor.x=n),null!=a&&(e.anchor.y=a),e.game.add.tween(e).to({angle:r},i,Phaser.Easing.Linear.None,!0,0,-1).yoyo(!0,0)}function p(e,t,i,n){var a=e.scale.x,o=e.scale.y;e.scale.x=0,e.scale.y=0,e.game.add.tween(e.scale).to({x:a,y:o},i||800,Phaser.Easing.Elastic.Out,!0,t||0)}function m(e,t,i,n){var a=.3*n;e.alpha=0;var o=e.game.add.tween(e).to({alpha:1},a,Phaser.Easing.Linear.None,!0,i||0),r=e.game.add.tween(e).to({alpha:0},a,Phaser.Easing.Linear.None,!1,n-2*a);o.chain(r),e.game.add.tween(e).to({y:"-"+t},n,Phaser.Easing.Quadratic.Out,!0,i||0)}function v(e,t,i){var n=.3*i,a=.15*i,o=e.scale.x,r=e.scale.y;e.scale.x=0,e.scale.y=0,e.game.add.tween(e.scale).to({x:o,y:r},a,Phaser.Easing.Quadratic.In,!0,t||0),e.game.add.tween(e).to({alpha:0},n,Phaser.Easing.Linear.None,!0,i-a)}Object.defineProperty(i,"__esModule",{value:!0}),i.moveTo=n,i.fade=a,i.fadeIn=o,i.fadeOut=r,i.scaleTo=s,i.moveToDom=l,i.getScaleFromDom=u,i.bulge=c,i.spinIn=h,i.wobbleScaleIn=d,i.jiggle=f,i.jiggleAngle=g,i.scaleIn=p,i.fadeFloat=m,i.scaleThenFade=v},{}],26:[function(e,t,i){"use strict";function n(e,t){return t||(t=0),Math.floor(Math.random()*(e-t+1))+t}function a(e){return e[this.rndInt(e.length-1,0)]}function o(e){return e||(e=1),"rgba("+this.rndInt(256)+","+this.rndInt(256)+","+this.rndInt(256)+","+e+")"}function r(){return this.game.global.windowHeight>this.game.global.windowWidth}function s(e){return JSON.parse(JSON.stringify(e))}function l(e,t){var i=e.indexOf(t);i>-1&&e.splice(i,1)}function u(e){return-1===e.lastIndexOf(".")?e:e.substring(0,e.lastIndexOf("."))}function c(e){e.style.opacity=0;var t=+new Date;!function i(){e.style.opacity=+e.style.opacity+(new Date-t)/400,t=+new Date,+e.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(i)||setTimeout(i,16))}()}function h(e){return 100*Math.sqrt(2*Math.abs(e)/b)}function d(e){var t={boolean:{},number:{},string:{}},i=[];return e.filter(function(e){var n=void 0===e?"undefined":v(e);return n in t?!t[n].hasOwnProperty(e)&&(t[n][e]=!0):!(i.indexOf(e)>=0)&&i.push(e)})}function f(e,t){var i,n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function g(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function p(e,t){var i=document.getElementById(e),n=i.getBoundingClientRect(),a=n.width*window.devicePixelRatio/t._frame.sourceSizeW;t.scale.x=a,t.scale.y=a,!1==t._frame.sourceSizeH*a<=n.height*window.devicePixelRatio&&(a=n.height*window.devicePixelRatio/t._frame.sourceSizeH,t.scale.x=a,t.scale.y=a),t.anchor.set(.5,.5),t.x=(n.left+.5*n.width)*window.devicePixelRatio,t.y=(n.top+.5*n.height)*window.devicePixelRatio}function m(e){switch(e){case"Linear":return Phaser.Easing.Linear.None;case"BackIn":return Phaser.Easing.Back.In;case"BackOut":return Phaser.Easing.Back.Out;case"BounceIn":return Phaser.Easing.Bounce.In;case"BounceOut":return Phaser.Easing.Bounce.Out;case"CircularIn":return Phaser.Easing.Circular.In;case"CircularOut":return Phaser.Easing.Circular.Out;case"CubicIn":return Phaser.Easing.Cubic.In;case"CubicOut":return Phaser.Easing.Cubic.Out;case"ElasticIn":return Phaser.Easing.Elastic.In;case"ElasticOut":return Phaser.Easing.Elastic.Out;case"ExponentialIn":return Phaser.Easing.Exponential.In;case"ExponentialOut":return Phaser.Easing.Exponential.Out;case"QuadraticIn":return Phaser.Easing.Quadratic.In;case"QuadraticOut":return Phaser.Easing.Quadratic.Out;case"QuarticIn":return Phaser.Easing.Quartic.In;case"QuarticOut":return Phaser.Easing.Quartic.Out;case"QuinticIn":return Phaser.Easing.Quintic.In;case"QuinticOut":return Phaser.Easing.Quintic.Out;case"SinusoidalIn":return Phaser.Easing.Sinusoidal.In;case"SinusoidalOut":return Phaser.Easing.Sinusoidal.Out}console.error('unkown easing value "'+e+'"')}Object.defineProperty(i,"__esModule",{value:!0});var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.rndInt=n,i.sample=a,i.rndRgba=o,i.isPortrait=r,i.clone=s,i.remove=l,i.removeExtension=u,i.fadeIn=c,i.calcQuadTime=h,i.uniq=d,i.extend=f,i.numberWithCommas=g,i.animToDom=p,i.getEasing=m;var b=19.8},{}],27:[function(e,t,i){"use strict";function n(e,t,i){return!(void 0!==e&&i>e)&&(void 0!==t&&i>=t)}Object.defineProperty(i,"__esModule",{value:!0}),i.checkIfShouldBeEnabled=n},{}]},{},[3]);
